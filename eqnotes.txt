
SPA List
===================================
https://forums.station.sony.com/eq/index.php?threads/enumerated-spa-list.206288/

AFFECTNUMBER AFFECTNAME
0 HP
1 AC
2 Attack Power
3 Movement Rate
4 STR
5 DEX
6 AGI
7 STA
8 INT
9 WIS
10 CHA
11 Melee Speed
12 Invis
13 See Invis
14 Enduring Breath
15 Mana
16 NPC-Frenzy
17 NPC-Awareness
18 NPC Aggro
19 NPC Faction
20 Blindness
21 Stun
22 Charm
23 Fear
24 Fatigue
25 Bind Affinity
26 Gate
27 Dispel Magic
28 Invis Vs Undead
29 Invis Vs Animals
30 NPC-ReactRange
31 Enthrall (Mez)
32 Create Item
33 Spawn NPC
34 Confuse
35 Disease
36 Poison
37 DetectHostile
38 DetectMagic
39 DetectPoison
40 Invulnerability
41 Banish
42 Shadow Step
43 Berserk
44 Lycanthropy
45 Vampirism
46 Resist Fire
47 Resist Cold
48 Resist Poison
49 Resist Disease
50 Resist Magic
51 Detect Traps
52 Detect Undead
53 Detect Summoned
54 Detect Animals
55 Stoneskin
56 True North
57 Levitation
58 Change Form
59 Reflect Damage
60 TransferItem
61 Identify
62 Item ID
63 NPC-WipeHatelist
64 Spin Stun
65 Infravision
66 Ultravision
67 NPC-POV
68 Reclaim Energy
69 Max HP
70 CorpseBomb
71 Create Undead
72 PreserveCorpse
73 TargetsView
74 FeignDeath
75 Ventriloquism
76 Sentinel
77 LocateCorpse
78 SpellShield
79 InstantHP
80 Enchant:Light
81 Resurrect
82 SummonPlayer
83 Portal
84 Hp-NPC-ONLY
85 ContactAbility
86 NPC-Help-Radius
87 Telescope
88 CombatPortal
89 Height
90 IgnorePet
91 SummonCorpse
92 Instant Hate
93 WeatherControl
94 Fragile
95 Sacrifice
96 Silence
97 Max Mana
98 Bard Haste
99 Root
100 DOT Heals
101 Complete Heal
102 Pet No Fear
103 Summon Pet
104 Translocate
105 Anti-Gate
106 BeastLordPet
107 AlterNPCLevel
108 Familiar
109 CreateItemInBag
110 IncreaseArchery
111 Resistances
112 SetCastingLevel
113 SummonMount
114 Modify Hate
115 Cornucopia
116 Curse
117 HitMagic
118 Amplification
119 BardHaste2
120 HealMod
121 IronMaiden
122 ReduceSkill
123 Immunity
124 Fc_Damage_%
125 Fc_HealMod
126 Fc_ResistMod
127 Fc_CastTimeMod
128 Fc_DurationMod
129 Fc_RangeMod
130 Fc_HateMod
131 Fc_ReagentMod
132 Fc_ManaMod
133 Fc_StunTimeMod
134 Ff_LevelMax
135 Ff_ResistType
136 Ff_TargetType
137 Ff_WhichSPA
138 Ff_Beneficial
139 Ff_WhichSpellID
140 Ff_DurationMin
141 Ff_InstantOnly
142 Ff_LevelMin
143 Ff_CastTimeMin
144 Ff_CastTimeMax
145 NPC Warder Banish
146 ResistElectricity
147 Percent Heal
148 StackingBlocker
149 StripVirtualSlot
150 DeathPact
151 PocketPet
152 PetSwarm
153 DamageBalance
154 Cancel Negative
155 PoP Resurrect
156 Mirror
157 Feedback
158 Reflect
159 Mod all Stats
160 Sobriety
161 Spell Guard
162 Melee Guard
163 Absorb Hit
164 Object - Sense Trap
165 Object - Disarm Trap
166 Object - Picklock
167 Fc_Pet
168 Defensive
169 Critical Melee
170 Critical spell
171 Crippling Blow
172 Evasion
173 Riposte
174 Dodge
175 Parry
176 Dual Wield
177 Double Attack
178 Melee Lifetap
179 Puretone
180 Sanctification
181 Fearless
182 Hundred Hands
183 Skill Increase Chance
184 Accuracy %
185 Skill Damage Mod
186 Min Damage Done Mod
187 Mana Balance
188 Block
189 Endurance
190 Max Endurance
191 Amnesia
192 Hate
193 Skill Attack
194 Fade
195 Stun Resist
196 Strikethrough
197 Skill Damage Taken
198 Instant Endurance
199 Taunt
200 Proc Chance
201 Ranged Proc
202 IllusionOther
203 MassBuff
204 Group Fear Immunity
205 Rampage
206 AETaunt
207 Flesh to Bone
208 Purge Poison
209 Cancel Beneficial
210 PetShield
211 AEMelee
212 Frenzied Devastation
213 Pet % HP
214 HP Max Percent
215 Pet Avoidance
216 AccuracyAmt
217 Headshot
218 Pet Crit Melee
219 SlayUndead
220 Skill Damage Amt
221 ReduceWeight
222 BlockBehind
223 Double Riposte
224 AddRiposte
225 GiveDblAtk
226 2hbash
227 ReduceSkillTimer
228 ReduceFallDmg
229 CastThroughStun
230 IncreaseShieldDist
231 StunBashChance
232 DivineSave
233 Metabolism
234 Poison Mastery
235 FocusChannelling
236 Free Pet
237 PetAffinity
238 PermanentIllusion
239 Stonewall
240 String Unbreakable
241 ImproveReclaimEnergy
242 IncreaseChanceMemwipe
243 NoBreakCharmChance
244 RootBreakChance
245 TrapCircumvention
246 Lung Capacity
247 IncreaseSkillCap
248 ExtraSpecialization
249 OffhandMin
250 SpellProcChance
251 EndlessQuiver
252 BackstabFront
253 ChaoticStab
254 NoSpell
255 Shielding Duration Mod
256 ShroudOfStealth
257 GivePetHold
258 TripleBackstab
259 ACLimitMod
260 AddInstrumentMod
261 SongModCap
262 StatsCap
263 TradeskillMasteries
264 ReduceAATimer
265 NoFizzle
266 AddExtraAttackChance (2h)
267 AddPetCommands
268 AlcFailRate
269 BandagePercLimit
270 BardSongRange
271 BaseRunMod
272 CastingLevel
273 Critical DoT
274 CriticalHeal
275 CriticalMend
276 DualWieldAmt
277 ExtraDIChance
278 FinishingBlow
279 FlurryChance
280 PetFlurryChance
281 GivePetFeign
282 IncreaseBandageAmt
283 SpecialAttackChain
284 LoHSetHeal
285 NoMoveCheckSneak
286 Fc_Damage_Amt
287 Fc_DurationMod (static)
288 AddProcHit
289 Doom Effect
290 IncreaseMovementCap
291 Purify
292 Strikethrough2
293 StunResist2
294 SpellCritChance
295 ReduceTimerSpecial
296 Fc_Damage_%_Incoming
297 Fc_Damage_Amt_Incoming
298 Height (Small)
299 Wake the Dead
300 Doppelganger
301 Increase Range Damage
302 Fc_Damage_%_Crit
303 Fc_Damage_Amt_Crit
304 Secondary Riposte Mod
305 Mitigate Damage Shield
306 Wake The Dead 2
307 Appraisal
308 Zone Suspend Minion
309 Gate Caster's Bindpoint
310 Fc_ReuseTimer
311 Ff_CombatSkill
312 Observer
313 Forage Master
314 Improved Invis
315 Improved Invis Undead
316 Improved Invis Animals
317 Worn Regen Cap
318 Worn Mana Cap
319 Critical HP Regen
320 Shield Block Chance
321 Reduce Target Hate
322 Gate Starting City
323 Defensive Proc
324 HP for Mana
325 No Break AE Sneak
326 Spell Slots
327 Buff Slots
328 Negative HP Limit
329 Mana Absorb % Damage
330 Critical Melee Damage Mod
331 Alchemy Item Recovery
332 Summon to Corpse
333 Doom Rune Effect
334 HP No Move
335 Fc_Immunity_Focus
336 Illusionary Target
337 Increase Exp %
338 Expedient Recovery
339 Fc_CastProc
340 Chance Spell
341 Worn Attack Cap
342 No Panic
343 Spell Interrupt
344 Item Channeling
345 Assassinate Max
346 Headshot Max
347 Double Ranged Attack
348 Ff_Mana_Min
349 Increase Damage With Shield
350 Manaburn
351 Spawn Interactive Object
352 Increase Trap Count
353 Increase SOI Count
354 Deactivate All Traps
355 Learn Trap
356 Change Trigger Type
357 Fc_Mute
358 Instant Mana
359 Passive Sense Trap
360 Proc On Kill Shot
361 Proc On Death
362 Potion Belt
363 Bandolier
364 AddTripleAttackChance
365 Proc On Spell Kill Shot
366 Group Shielding
367 Modify Body Type
368 Modify Faction
369 Corruption
370 ResistCorruption
371 Slow
372 Grant Foraging
373 Doom Always
374 Trigger Spell
375 Critical DoT Damage Mod
376 Fling
377 Doom Entity
378 Resist Other SPA
379 Directional Shadowstep
380 Knockback Explosive
381 Fling to Self
382 Suppression
383 Fc_CastProcNormalized
384 Fling to Target
385 Ff_WhichSpellGroup
386 Doom Dispeller
387 Doom Dispellee
388 Summon All Corpses
389 Fc_Timer_Refresh
390 Fc_Timer_Lockout
391 Ff_Mana_Max
392 Fc_Heal_Amt
393 Fc_Heal_%_Incoming
394 Fc_Heal_Amt_Incoming
395 Fc_Heal_%_Crit
396 Fc_Heal_Amt_Crit
397 Pet_Amt_Mitigation
398 Fc_Swarm_Pet_Duration
399 Fc_Twincast
400 Healburn
401 Mana Ignite
402 Endurance Ignite
403 Ff_SpellClass
404 Ff_SpellSubclass
405 Staff Block Chance
406 Doom Limit Use
407 Doom Focus Used
408 Limit HP
409 Limit Mana
410 Limit Endurance
411 Ff_ClassPlayer
412 Ff_Race
413 Fc_BaseEffects
414 Ff_CastingSkill
415 Ff_ItemClass
416 AC_2
417 Mana_2
418 Increased_Skill_Damage_2
419 Contact_Ability_2
420 Fc_Limit_Use
421 Fc_Limit_Use_Amt
422 Ff_Limit_Use_Min
423 Ff_Limit_Use_Type
424 Gravitate
425 Fly
426 AddExtTargetSlots
427 Skill_Proc
428 Skill_Proc_Modifier
429 Skill_Proc_Success
430 PostEffect
431 PostEffectData
432 ExpandMaxActiveTrophyBenefits
433 CriticalDotDecay
434 CriticalHealDecay
435 CriticalRegenDecay
436 Beneficial Countdown Hold
437 Teleport to Anchor
438 Translocate to Anchor
439 Assassinate
440 FinishingBlowMax
441 Distance Removal
442 Doom Req Target
443 Doom Req Caster
444 Improved Taunt
445 Add Merc Slot
446 A_Stacker
447 B_Stacker
448 C_Stacker
449 D_Stacker
450 DoT Guard
451 Melee Threshold Guard
452 Spell Threshold Guard
453 Doom Melee Threshold
454 Doom Spell Threshold
455 Add Hate %
456 Add Hate Over Time %
457 Resource Tap
458 Faction Mod %
459 Skill Damage Mod 2
460 Ff_Override_NotFocusable
461 Fc_Damage_%2
462 Fc_Damage_Amt2
463 Shield Target
464 PC Pet Rampage
465 PC Pet AE Rampage
466 PC Pet Flurry Chance
467 DS Mitigation Amount
468 DS Mitigation Percentage
469 Chance Best in Spell Group
470 Trigger Best in Spell Group
471 Double Melee Round (PC Only) 




spells_us.txt Field List
===================================
https://forums.station.sony.com/eq/index.php?threads/enumerated-spa-list.206288/page-2#post-3101242

0 SPELLINDEX
1 SPELLNAME
2 ACTORTAG
3 NPC_FILENAME
4 CASTERMETXT
5 CASTEROTHERTXT
6 CASTEDMETXT
7 CASTEDOTHERTXT
8 SPELLGONE
9 RANGE
10 IMPACTRADIUS
11 OUTFORCE
12 UPFORCE
13 CASTINGTIME
14 RECOVERYDELAY
15 SPELLDELAY
16 DURATIONBASE
17 DURATIONCAP
18 IMPACTDURATION
19 MANACOST
20 BASEAFFECT1
21 BASEAFFECT2
22 BASEAFFECT3
23 BASEAFFECT4
24 BASEAFFECT5
25 BASEAFFECT6
26 BASEAFFECT7
27 BASEAFFECT8
28 BASEAFFECT9
29 BASEAFFECT10
30 BASEAFFECT11
31 BASEAFFECT12
32 BASE_EFFECT2_1
33 BASE_EFFECT2_2
34 BASE_EFFECT2_3
35 BASE_EFFECT2_4
36 BASE_EFFECT2_5
37 BASE_EFFECT2_6
38 BASE_EFFECT2_7
39 BASE_EFFECT2_8
40 BASE_EFFECT2_9
41 BASE_EFFECT2_10
42 BASE_EFFECT2_11
43 BASE_EFFECT2_12
44 AFFECT1CAP
45 AFFECT2CAP
46 AFFECT3CAP
47 AFFECT4CAP
48 AFFECT5CAP
49 AFFECT6CAP
50 AFFECT7CAP
51 AFFECT8CAP
52 AFFECT9CAP
53 AFFECT10CAP
54 AFFECT11CAP
55 AFFECT12CAP
56 IMAGENUMBER
57 MEMIMAGENUMBER
58 EXPENDREAGENT1
59 EXPENDREAGENT2
60 EXPENDREAGENT3
61 EXPENDREAGENT4
62 EXPENDQTY1
63 EXPENDQTY2
64 EXPENDQTY3
65 EXPENDQTY4
66 NOEXPENDREAGENT1
67 NOEXPENDREAGENT2
68 NOEXPENDREAGENT3
69 NOEXPENDREAGENT4
70 LEVELAFFECT1MOD
71 LEVELAFFECT2MOD
72 LEVELAFFECT3MOD
73 LEVELAFFECT4MOD
74 LEVELAFFECT5MOD
75 LEVELAFFECT6MOD
76 LEVELAFFECT7MOD
77 LEVELAFFECT8MOD
78 LEVELAFFECT9MOD
79 LEVELAFFECT10MOD
80 LEVELAFFECT11MOD
81 LEVELAFFECT12MOD
82 LIGHTTYPE
83 BENEFICIAL
84 ACTIVATED
85 RESISTTYPE
86 SPELLAFFECT1
87 SPELLAFFECT2
88 SPELLAFFECT3
89 SPELLAFFECT4
90 SPELLAFFECT5
91 SPELLAFFECT6
92 SPELLAFFECT7
93 SPELLAFFECT8
94 SPELLAFFECT9
95 SPELLAFFECT10
96 SPELLAFFECT11
97 SPELLAFFECT12
98 TYPENUMBER
99 BASEDIFFICULTY
100 CASTINGSKILL
101 ZONETYPE
102 ENVIRONMENTTYPE
103 TIMEOFDAY
104 WARRIORMIN
105 CLERICMIN
106 PALADINMIN
107 RANGERMIN
108 SHADOWKNIGHTMIN
109 DRUIDMIN
110 MONKMIN
111 BARDMIN
112 ROGUEMIN
113 SHAMANMIN
114 NECROMANCERMIN
115 WIZARDMIN
116 MAGICIANMIN
117 ENCHANTERMIN
118 BEASTLORDMIN
119 BERSERKERMIN
120 CASTINGANIM
121 TARGETANIM
122 TRAVELTYPE
123 SPELLAFFECTINDEX
124 CANCELONSIT
125 DIETY_AGNOSTIC
126 DIETY_BERTOXXULOUS
127 DIETY_BRELLSERILIS
128 DIETY_CAZICTHULE
129 DIETY_EROLLISIMARR
130 DIETY_FIZZLETHORP
131 DIETY_INNORUUK
132 DIETY_KARANA
133 DIETY_MITHMARR
134 DIETY_PREXUS
135 DIETY_QUELLIOUS
136 DIETY_RALLOSZEK
137 DIETY_RODCETNIFE
138 DIETY_SOLUSEKRO
139 DIETY_TRIBUNAL
140 DIETY_TUNARE
141 DIETY_VEESHAN
142 NPC_NO_CAST
143 AI_PT_BONUS
144 NEW_ICON
145 SPELL_EFFECT_INDEX
146 NO_INTERRUPT
147 RESIST_MOD
148 NOT_STACKABLE_DOT
149 DELETE_OK
150 REFLECT_SPELLINDEX
151 NO_PARTIAL_SAVE
152 SMALL_TARGETS_ONLY
153 USES_PERSISTENT_PARTICLES
154 BARD_BUFF_BOX
155 DESCRIPTION_INDEX
156 PRIMARY_CATEGORY
157 SECONDARY_CATEGORY_1
158 SECONDARY_CATEGORY_2
159 NO_NPC_LOS
160 FEEDBACKABLE
161 REFLECTABLE
162 HATE_MOD
163 RESIST_PER_LEVEL
164 RESIST_CAP
165 AFFECT_INANIMATE
166 STAMINA_COST
167 TIMER_INDEX
168 IS_SKILL
169 ATTACK_OPENING
170 DEFENSE_OPENING
171 SKILL_OPENING
172 NPC_ERROR_OPENING
173 SPELL_HATE_GIVEN
174 ENDUR_UPKEEP
175 LIMITED_USE_TYPE
176 LIMITED_USE_COUNT
177 PVP_RESIST_MOD
178 PVP_RESIST_PER_LEVEL
179 PVP_RESIST_CAP
180 GLOBAL_GROUP
181 PVP_DURATION
182 PVP_DURATION_CAP
183 PCNPC_ONLY_FLAG
184 CAST_NOT_STANDING
185 CAN_MGB
186 NO_DISPELL
187 NPC_MEM_CATEGORY
188 NPC_USEFULNESS
189 MIN_RESIST
190 MAX_RESIST
191 MIN_SPREAD_TIME
192 MAX_SPREAD_TIME
193 DURATION_PARTICLE_EFFECT
194 CONE_START_ANGLE
195 CONE_END_ANGLE
196 SNEAK_ATTACK
197 NOT_FOCUSABLE
198 NO_DETRIMENTAL_SPELL_AGGRO
199 SHOW_WEAR_OFF_MESSAGE
200 IS_COUNTDOWN_HELD
201 SPREAD_RADIUS
202 BASE_EFFECTS_FOCUS_CAP
203 STACKS_WITH_SELF
204 NOT_SHOWN_TO_PLAYER
205 NO_BUFF_BLOCK
206 ANIM_VARIATION
207 SPELL_GROUP
208 SPELL_GROUP_RANK
209 NO_RESIST
210 ALLOW_SPELLSCRIBE
211 SPELL_REQ_ASSOCIATION_ID
212 BYPASS_REGEN_CHECK
213 CAN_CAST_IN_COMBAT
214 CAN_CAST_OUT_OF_COMBAT
215 SHOW_DOT_MESSAGE
216 INVALID
217 OVERRIDE_CRIT_CHANCE
218 MAX_TARGETS
219 NO_HEAL_DAMAGE_ITEM_MOD
220 CASTER_REQUIREMENT_ID
221 SPELL_CLASS
222 SPELL_SUBCLASS
223 AI_VALID_TARGETS
224 NO_STRIP_ON_DEATH
225 BASE_EFFECTS_FOCUS_SLOPE
226 BASE_EFFECTS_FOCUS_OFFSET
227 DISTANCE_MOD_CLOSE_DIST
228 DISTANCE_MOD_CLOSE_MULT
229 DISTANCE_MOD_FAR_DIST
230 DISTANCE_MOD_FAR_MULT
231 MIN_RANGE
232 NO_REMOVE
233 SPELL_RECOURSE_TYPE
234 ONLY_DURING_FAST_REGEN
235 IS_BETA_ONLY
236 SPELL_SUBGROUP



Resists
=================================================
http://forums.station.sony.com/eqold/posts/list.m?start=150&topic_id=165000#2497269
Message edited by Prathun-Dev on 07/01/2010 15:54:35.

Here we go.  If any of this is confusing or needs clarification, or if the formatting goes belly-up, I'll edit this post to make the spell resistance explanation as clear as possible.  In the interest of keeping the breakdown relatively simple, I've excluded special cases involving PvP or pets.  Let me know if you have any questions.

Pull the spell's resist modifier value from the spell (or the spell list override, if one exists).
Adjust the resist modifier for applicable focus effects.
Check for fear immunity.  If roll is made, resist spell.
Check for resistance to the spell effect.  If roll is made, resist spell.
Check for Sanctification.  If roll is made and spell is not no_resist, resist spell.
Calculate target's resistance chance applicable to this spell.
     If spell's resist type is no_save, spell lands.
     Otherwise, magic checks against magic, fire against fire, chromatic checks lowest, prismatic checks average, etc.  The capped resistance score is used.
Set resist chance to 15 if the spell effect is a lull.
Adjust resist chance for level difference between caster and target.
     Set temp level difference to (target level - caster level).
     If target is at least level 67 and target is an NPC, temp level difference is set to (66 - caster level) or 0, whichever is greater.
     If target is a PC, and caster level is at least 21, and temp level difference is greater than 15, set temp level difference to 15.
     If target is an NPC, and temp level difference is less than -9, set temp level difference to -9.
     Set level modifier to (temp level difference * temp level difference / 2)
     If temp level difference is negative, make level modifier negative.
     If target is an NPC and caster is far below target's level, set level modifier to 1000.
     Add level modifier to resist chance.
Adjust resist chance for spell's resist modifier.
If effect is damage and target is a non-mercenary NPC...
     If target is at least level 67, level difference is set to (66 - caster level) or 0, whichever is greater.
     If target is at least level 17 and level difference is greater than 0, add (2 * level difference) to resist chance.
If resist chance is greater than spell's max resist and the max resist is not 0, set the resist chance to max resist.
If resist chance is less than spell's min resist and the min resist is not 0, set the resist chance to min resist.
Roll a random number between 0 and 200.
If the roll is greater than the resist chance, spell lands.
If the roll is not greater than the resist chance and the spell does not allow partial resists, resist spell.
If spell effect does not apply damage, spell lands.
Otherwise, spell effect applies damage.  Calculate partial resist.
     If the resist chance is less than 1, set the resist chance to 1.
     Partial resist modifier is set to ((150 * (resist chance - roll)) / resist chance).
     If target is a non-mercenary NPC...
          If target is higher level than caster, and target is at least level 17, and caster is level 50 or below, add 5 to partial resist modifier.
          If target is at least level 30 and caster is level 50 or below, add (casterlevel - 25) to partial resist modifier.
          If target's level is less than 15, subtract 5 from partial resist modifier.
     If caster is an NPC...
          If target is at least 20 levels higher than caster, add (level difference * 1.5) to partial resist modifier.
     If partial resist modifier is less than 0, set partial resist modifier to 0.
     If partial resist modifier is greater than 100, set partial resist modifier to 100.
     Spell may land.  A partial resist modifier of 0 means resist spell.  A partial resist modifier of 100 means spell lands for full.  Anything inbetween means that the spell lands partially, and the partial resist modifier is used to calculate resulting damage.


AC
=====================================================
https://forums.station.sony.com/eq/index.php?threads/ac-vs-acv2.210028/
Dzarn - Developer


    Okay, this is something I've been researching over the last few days to present.
    What is your 'Real AC'?
    Or, When 'Mitigation AC' meets 'Avoidance AC'

    Hopefully this will shed some light on the arcane calculations used to get the number you see in your inventory window versus the number used for some mitigation and avoidance purposes.

    I'll preface this by saying that this may generate more questions than I am able to answer in the near future, but this is as complete of an answer as I can offer at the moment.

    So you want to know what your 'Real AC' is? I'll step you through the calculations and explain why the number you see in your inventory window is not representative of what NPCs look at when they're hitting you in melee combat. It is a strong possibility that sometime in the future the number you see in your inventory window will be accurately reflective of the number we're going to calculate here, but this will hopefully be helpful in the meantime.

    Note that unless explicitly stated otherwise all of these calculations are using integer math, so truncation will occur with each division.

    Let's start with what we'll call your 'Displayed AC Value'. This is the number in your inventory window.

    Displayed AC Value is equal to what we'll call your 'AC Sum' added to your 'Computed Defense' multiplied by 1000 then divided by 350 plus 497. What that looks like as an equation is:
    (1000 * (ACSum + ComputedDefense)) / (350 + 497)

    Because it's shorter, I'll now explain how to find your 'Computed Defense'. Think of the 'Computed Defense' as 'Avoidance AC', it is basically how hard it is to land a hit on you. Despite this fact, this value gets rolled into displayed AC. To calculate this, take your defense skill multiplied by 400 then divided by 225, add your 'Agility Bonus', add the capped sum of your 'Item Avoidance', then multiply this value based on your 'Drunkenness Reduction'. If this value is less than 1, return 1 instead. I'll display this as an equation then break down the steps in the next paragraphs:
    Step1 = (DefenseSkill*400) / 225
    Step2 = Step1 + 'Agility Bonus'
    Step3 = Step2 + 'Item Avoidance'
    Step4 = Step3 * 'Drunkenness Reduction'
    If Step4 < 1: 'Computed Defense' = 1
    Otherwise 'Computed Defense' = Step4.

    Your 'Agility Bonus' is calculated as your 'Functional Agility' minus 40, multiplied by 8000 divided by 36000 added to your heroic agility divided by 10. Your 'Functional Agility' is defined as your capped stat + the amount of heroic Agility you have. I'll use the values on my avatar as an example, the second tab of my inventory window states that I have 1002/900 base agility +395 heroic agility. My 'Functional Agility' is 900+395, 1295, the value that is displayed on the first tab of my inventory window. In equation form it looks like:
    Step1 = (8000 * (FunctionalAgility-40)) / 36000
    Step2 = (HeroicAgility / 10)
    'Agility Bonus' = Step1 + Step2

    Your 'Item Avoidance' is the capped value of 'Avoidance' stat that you have from items. The cap is currently 100 points.

    Your 'Drunkenness Reduction' is a multiplier that is applied if you are beyond a certain threshold of drunkenness. The amount of drunk you can be is a range from 0-200, each drink adds a fixed amount based on your alcohol tolerance skill but for the purposes of this equation only the 0-200 scale is relevant. This calculation uses float math so decimals are in play: If your drunkenness value divided by 2 (let's call it 'Value') is greater than 20.0 then you have a 'Reduction Multiplier' equal to 110 minus 'Value' divided by 100.0. If this 'Reduction Multiplier' is greater than 1.0, set it to 1.0. Multiply your 'Step3' value by this 'Reduction Multiplier' and truncate any decimal points. In equation form:
    Value = HowDrunk / 2
    Reduction = (110 - Value)/100.0
    If Reduction > 1.0: Reduction = 1.0
    Step4 = truncate(Step3*Reduction)

    Now we've successfully calculated your 'Computed Defense' value, we're halfway there (kinda)!

    Let's calculate your 'AC Sum'. It is in this portion of the equation that the number you see in your inventory window begins to diverge from what the server uses for combat calculations. I'll point out each location where these numbers diverge as we get to them.

    Your 'AC Sum' is calculated with all of the following:
    1. Your 'Base AC' value, which for players is equal to 0 but can be higher if you are a shroud.
    2. The total AC stat you see on each item that you have equipped in your inventory window not including your ammo slot.
    3. If you have a shield in your secondary slot, its value is included in step 2 but it is also recorded individually as a 'Shield AC' value.
    4. Additionally if you have a shield equipped in your secondary slot, your heroic strength / 10 is added to your 'Shield AC' value.
    5. Any AC from the drink you are consuming.
    6. Any AC from the food you are consuming.
    7. Any AC from a tribute item you have equipped.
    8. Any AC from a trophy item you have equipped.
    9. Any AC from a guild tribute item you have equipped.
    10. Any AC from a guild trophy item you have equipped.

    To put the above into an equation:
    Step1 = 0 (base ac)
    Step2 = Sum of all of the AC stat on every piece of gear you can see in you inventory (not ammo slot.)
    Step3 = If equipping shield [AC stat on your shield + (HeroicSTR/10)]
    Step4 = FoodAC + DrinkAC
    Step5 = TributeItemAC + TrophyItemAC + GuildTributeItemAC + GuildTrophyItemAC
    Step6 = Step1+Step2+Step4+Step5

    Now 'EQ Math' comes into play. We're going to start doing things with the numbers that I don't have real answers for, but this is what happens. Take the sum you've got from the above steps and multiply that by 4 then divide by 3.
    Step7 = (Step6 * 4) /3

    The next step is the first point that the inventory window value you see and the server's calculated value can differ. There is some anti-twinking code in place that states that if you are below level 50 and the ac value we've calculated up to this point exceeds 25 + 6 times your level, cap your AC at 25 + 6 times your level. This only happens on the server and is not displayed in the inventory window however. In equation form:
    Step8 (server) = if PlayerLevel < 50 and Step7 > (25 + (6*PlayerLevel)): = (25 + (6*PlayerLevel))
    Step8 (server) = Otherwise: = Step7
    Step8 (player) = Step7

    Now we add your class and race bonuses to your AC value. This is another trip into 'EQ Math'. This step is relevant if you are a monk, a rogue, a beastlord, or an Iksar. If you are a monk the following data points come into play: Based on your level you have a hard cap on the amount of weight you can carry and you have a soft cap on the weight you can carry.
    Level 15: HardCap 32: SoftCap 15
    Level 30: HardCap 34: SoftCap 16
    Level 45: HardCap 36: SoftCap 17
    Level 51: HardCap 38: SoftCap 18
    Level 55: HardCap 40: SoftCap 20
    Level 60: HardCap 45: SoftCap 24
    Level 62: HardCap 47: SoftCap 24
    Level 64: HardCap 50: SoftCap 24
    Level 65: HardCap 53: SoftCap 26
    Level 70: HardCap 53: SoftCap 28
    Level 75: HardCap 53: SoftCap 30
    Level 80: HardCap 54: SoftCap 31
    Level 85: HardCap 55: SoftCap 32
    Level 90: HardCap 56: SoftCap 33
    Level 95: HardCap 57: SoftCap 34
    Level 100: HardCap 58: SoftCap 35

    Staying under the hard cap allows you to receive an AC bonus that gets increasingly worse if you are over your soft cap. Going over your hard cap will cause you to incur an AC penalty however. The way this is calculated is as follows:

    If your total weight is less than your (Hard Cap - 1) then your bonus starts out as (your level + 5). If your total weight is greater than your soft cap, then a 'Reduction' is applied, this reduction is a float so decimals will come into play. Your reduction is equal to your current weight minus your soft cap multiplied by 6.66667, this reduction is capped at 100.0 then your reduction is set equal to 100 minus reduction divided by 100. Your bonus is then multiplied by this reduction value and if it is less than 0 it is set equal to 0. As an equation:
    ACBonus = PlayerLevel + 5
    If Weight > SoftCap:
    Reduction = (Weight - SoftCap) * 6.66667
    If Reduction > 100.0: = 100.0
    Reduction = (100 - Reduction) / 100
    ACBonus = ACBonus*Reduction
    If ACBonus < 0: = 0

    After that occurs the AC bonus is multiplied by 4 and divided by 3, because 'EQ Math'. As an equation:
    ACBonus = (4 * ACBonus) / 3

    Now if the previous case was not true and it turns out that your total weight is greater than your (Hard Cap +1) then you will incur an AC penalty that can be as bad as (your level + 5). The 'Penalty Multiplier' is equal to your total weight minus 10 less than your hard cap then divided by 100.0, if this 'Penalty Multiplier' is greater than 1.00 then it is set to 1.00. Your penalty is multiplied by 4 then divided by 3 then multiplied by this 'Penalty Multiplier'. In equation form:
    Penalty = PlayerLevel +5
    Multiplier = (Weight - (HardCap-10.0))/100.0
    If Multiplier > 1.0: = 1.0
    Penalty = (4 * Penalty) / 3
    Penalty = Multiplier * Penalty

    At the end of all of that, either your penalty or your bonus is added to your 'Class AC Bonus' for monks. Now we move onto rogues. If you are a rogue and you are above level 30 and your 'Functional Agility' is greater than 75 you get AC bonuses! They are broken down more easily as an equation than in words:
    LevelScaler = PlayerLevel - 26
    If Agility < 80: ACBonus = (LevelScaler * 1) / 4
    If Agility < 85: ACBonus = (LevelScaler * 2) / 4
    If Agility < 90: ACBonus = (LevelScaler * 3) / 4
    If Agility < 100: ACBonus = (LevelScaler * 4) / 4
    If Agility >= 100: ACBonus = (LevelScaler * 5) / 4
    If ACBonus > 12: = 12

    If instead of a monk or a rogue you happen to be a beastlord that is above level 10 you get a slightly more generous bonus than rogues based on your level and agility. Again this is easier as an equation than in words:
    LevelScaler = PlayerLevel - 6
    If Agility < 80: ACBonus = (LevelScaler * 1) / 5
    If Agility < 85: ACBonus = (LevelScaler * 2) / 5
    If Agility < 90: ACBonus = (LevelScaler * 3) / 5
    If Agility < 100: ACBonus = (LevelScaler * 4) / 5
    If Agility >= 100: ACBonus = (LevelScaler * 5) / 5
    If ACBonus > 16: = 16

    In addition to these class bonuses there is also the bonus for being an Iksar. This was included to help balance the game for Iksars who could not wear plate armor. A time honored tradition that was followed for 2 out of our 21 releases. The Iksar AC bonus is equal to your level with a minimum value of 10 and a maximum value of 35. In equation form:
    ACBonus = PlayerLevel
    If ACBonus < 10: = 10
    If ACBonus > 35: = 35

    Now the sum of your class and racial bonus is returned back to the 'AC Sum' formula.
    Step9 = Step8 + RaceClassBonus

    Now if your AC is less than 0, we set it back to zero here. I suppose this would come into play if you were a monk with no armor, very low defense and a terribly high amount of weight.
    If Step9 < 0: = 0

    Now we come to the second point where your visible AC value could differ from what the server calculates. However it's not entirely relevant because this step only occurs if you are an NPC. I'll cover it anyway.

    If you are an NPC, your base AC value is added to the calculated value up to this point, this is the value that designers put on NPCs to adjust for player attack values. You might notice in Plane of War that NPCs innately mitigate melee slightly better than in other zones. This is because PoWar uses AC values equivalent to player AC values (3000-4000) where 'most' of the creatures in game don't exceed 600 AC. In addition to this base AC value, if you are a summoned pet and your owner is a player, get the total amount of SPA 397 that they have. SPA 397 is essentially just pet AC. For reference, rank 18 of Sturdy Companion offers 3800 points of this SPA. In equation form, only relevant if you are an NPC or a pet:
    Step10 (Server) = Step9 + NPCBaseAC
    Step11 (Server) = Step10 + OwnersPetACAAs

    Now we include both buffs and defense skill as part of your AC Sum. This calculation differs between silk classes and everyone else and is also the reason why we typically don't include the base value of AC buffs in spell descriptions, because they differ depending on the class that is looking at the buff. For silk classes which are enchanters, magicians, necromancers and wizards you add your defense skill divided by 2 to your ac as well as the total amount of SPA 3 [AC] and SPA 416 [AC2] divided by 3 to your ac. For any other classes you will add your defense skill divided by 3 and the total amount of SPA 3 and SPA 416 divided by 4 to your ac.

    Now in addition to buffs there is also AC offered by AAs. Some important reference points at level 100 for those values are that each rank of Hero's Fortitude adds 10 ac and Armor of Wisdom offers a different amount of AC based on your classes broken down as follows:
    Armor of Wisdom 18 - Bards, Clerics, Monks, Rangers: 650 ac
    Armor of Wisdom 18 - Paladins, Shadowknights: 620 ac
    Armor of Wisdom 18 - Beastlords, Berserkers, Rogues, Shaman: 720 ac
    Armor of Wisdom 18 - Warriors: 610 ac
    Armor of Wisdom 18 - Druids, Enchanters, Magicians, Necromancers, Wizards: 840 ac

    In equation form:
    Step12 = If Silk: DefenseSkill / 2
    Step12 = Otherwise: DefenseSkill / 3
    Step13 = If Silk: (SPA3Buffs + SPA416Buffs) / 3
    Step13 = Otherwise: (SPA3Buffs + SPA416Buffs) / 4
    Step14 = If brd,clr,mnk,rng: AOWTotal / 4
    Step14 = If pal,shd: AOWTotal / 4
    Step14 = If bst,ber,rog,shm: AOWTotal / 4
    Step14 = If war: AOWTotal / 4
    Step14 = If dru,enc,mag,nec,wiz: AOWTotal / 3
    Step15 = If Silk: HerosFortTotal / 3
    Step15 = Otherwise: HerosFortTotal / 4
    Step16 = Step11 + Step12 + Step13 + Step14 + Step15

    Now the next step is to calculate an agility bonus if your agility is over 70. This bonus is equal to your 'Functional Agility' / 20. Afterwards if your ac is less than 0, set it back to 0 again. In equation form:
    Step17 = If FunctionalAgility > 70: = (FunctionalAgility / 20)
    Step 18 = Step16 + Step17
    If Step18 < 0: = 0

    That was the last thing that the player facing calculation does, so you can return the step18 value to the 'Displayed AC Value' function and you should get the same number you see in your inventory window if all of the math was done right. However the next step that occurs is the most important difference between what you see in your inventory window and what goes into the combat calculations in game, this is where the 'soft cap' on AC is calculated.

    The 'AC Soft Cap' is defined in a table for each class at each level. Each combination of those two data points has a 'Soft Cap' and a 'Post Cap Multiplier'. I'm only going to list the values for classes at level 100.
    Enchanters, Magicians, Necromancers, Wizards: Cap 408 - Multiplier 0.25
    Druids: Cap 418 - Multiplier 0.265
    Beastlords, Berserkers, Rogues, Shaman: Cap 432 - Multiplier 0.28
    Bards, Clerics, Monks: Cap 448 - Multiplier 0.3
    Rangers: Cap 468 - Multiplier 0.315
    Paladins, Shadowknights: Cap 488 - Multiplier 0.33
    Warriors: Cap 510 - Multiplier 0.35

    Based on your class you would take the Cap value then multiply it by the total amount of SPA 259 that you have, divide by 100 then add that back to the cap value. SPA 259 is primarily obtained through Combat Stability but there is a small additional amount granted via Physical Enhancement. For reference, rank 53 of Combat Stability is 80 points and Physical Enhancement is 2 points. In equation form:
    Step19 (Server) = (ACCap * SPA259Total) / 100
    Step20 (Server) = ACCap + Step19

    Now we go back to the amount of 'Shield AC' that was calculated earlier in the function and add that to this newly calculated AC cap. This is what has lead to the traditional wisdom that AC on your shield is anywhere from 4 to 3 times as useful as AC anywhere else.
    Step21 (Server) = Step3 + Step20

    Now if your total AC is greater than the AC cap we just calculated (a likely scenario at anything but very low levels) we multiply the amount over the soft cap by your class' multiplier and add that to your calculated soft cap value to get your 'Real AC'.
    If Step18 > Step21:
    Step22 (Server) = Step18 - Step21
    Step23 (Server) = Step21 + (Step22 * ClassMultiplier)
    Step24 (Server) = Truncate(Step23)
    'Mitigation AC' = Step24 (Server)

    Otherwise:
    'Mitigation AC' = Step18 (Server)
    Some of the combat calculations now use your 'Mitigation AC' for some of the mitigation calculations (in conjunction with innumerable other things that are outside the scope of this post.)

    While you may think of this number as 'Real AC', it is more accurate to say that it is your 'Mitigation AC' while your 'Displayed AC' is more of an obfuscated incomplete calculation.

Dzarn, Wednesday at 10:03 PM
#9 Last edited by Dzarn, Yesterday at 12:45 AM
Andarriel, skien, Diptera and 44 others like this.
Dzarn Developer

    As a sort of walkthrough I'll go through the math listed in the above post with my avatar character to try and make sense of calculating your Displayed AC (via your Mitigation and Avoidance AC values.)

    For the purposes of this demonstration: My avatar is a level 100 Dark Elf Shadow Knight with a mix of T1 CoTF Raid gear, most augments, access to all ranks of all available AAs, no special food or drink, no buffs, and no tribute or trophy effects of any kind. I have 395 heroic agility and 310 heroic strength while wearing a 350 ac shield.

    Displayed AC: 10480 [Value displayed in inventory window]
    (1000 * (ACSum + ComputedDefense)) / (350 + 497)
    (1000 * (7767 + 1110)) / (847) = 10480

    ComputedDefense: 1110
    (390/400) / 225 = 693
    (8000 * (1295 - 40)) / 36000 = 278
    + 100 avoidance from items
    0 Drunkenness

    ACSum: 7767
    5470 AC from all items in inventory window
    350 base shield ac + 31 shield ac from heroic strength
    0 from food, drink, tributes, trophies
    (5470 * 4) / 3 = 7293
    I'm above level 50 continue
    No racial or class bonuses
    I'm not an NPC or a pet
    I'm not a silk class so:
    7293 + (390/3) = 7423
    Armor of Wisdom rank 18 for pal/sk: 7423 + (620/4) = 7578
    Rank 50 of Hero's Fortitude: 7578 + (500/4) = 7703
    Agi > 70: 7703 + (1295 / 20) = 7767
    Return here for Displayed AC calculation.

    Mitigation AC: 3413 [Value returned by 'ac compute' function on the server]
    SK - Level 100: Cap 488: Multiplier: 0.33.
    (488 * 82 / 100) = 400
    488 + 400 = 888
    888 + 381 (shield ac) = 1269 softcap
    7767 > 1269 so:
    7767-1269 = 6498
    6498 * 0.33 = 2144
    1269 + 2144 = 3413


Critical Nukes
=======================
https://forums.station.sony.com/eq/index.php?threads/test-update-07-20-15.225079/

July 20, 2015 - Hludwolf

The old way critical damage was handled was as follows:
- 0 meant no critical damage, 100 is "the same," anything over 100 is a bonus.
- Only the best modifier from AAs was added, and only the best modifier from spells was added.
- Black Wolf had a crit damage value of 200, which meant it added 100% to your critical damage if you had no AA modifiers. With AA modifiers, it would actually add 200%.

The new way critical damage is handled is as follows:
- 100% is the base inherent critical damage modifier. The new SPA is now strictly a modifier to this number.
- Values below 0 mean less critical damage, 0 is "the same," and anything above 0 is a bonus.
- All modifiers stack (assuming they are in different slots). This means you get the bonus from Fury of Magic added to Spell Casting Fury Mastery (and, with the upcoming test update, Spell Casting Fury). If you have multiple spells active, they add up as well.
- To compensate for the "extra" 100% that used to be added when you had both a spell and an AA modifier active, we have (now) added a 100% modifier to Spell Casting Fury.
- Black Wolf has a crit damage value of 100, which means it adds 100% to your critical damage. This can now stack with other active buffs, or you can time your buffs for maximum effect as you did before.




Weapon Damage Bonus
=======================
https://forums.daybreakgames.com/eq/index.php?threads/test-update-09-17-15.226618/page-5#post-3326194

September 17, 2015 - Dzarn

To clarify the change to the weapon damage bonus formula:

Do note that there was a bug in the item display window where the damage bonus on weapons was displaying as 1 point less than it should have.
This has been corrected and the value displayed in the window is now the real primary hand value of the new formula.

Previous to this patch - Old formulas use truncation:
	1-Handed weapon - Primary Hand - Delay <= 39: 1 + [(level - 28) / 3]
	1-Handed weapon - Primary Hand - Delay < 43: 2 + [(level - 28) / 3] + [(delay-40)/3]
	1-Handed weapon - Primary Hand - Delay < 45: 3 + [(level - 28) / 3] + [(delay-40)/3]
	1-Handed weapon - Primary Hand - Delay >= 45: 4 + [(level - 28) / 3] + [(delay-40)/3]

	1-Handed weapon - Secondary Hand - No Sinister Strikes: 0
	1-Handed weapon - Secondary Hand - Sinister Strikes: 1 + [(level - 40) / 3] * [delay/30]

	2-Handed weapon - Delay <= 27: 1 + [(level - 28) / 3]
	2-Handed weapon - Delay < 40: 1 + [(level - 28) / 3] + [(level - 30) / 5]
	2-Handed weapon - Delay < 43: 2 + [(level - 28) / 3] + [(level - 30) / 5] + [(delay-40)/3]
	2-Handed weapon - Delay < 45: 3 + [(level - 28) / 3] + [(level - 30) / 5] + [(delay-40)/3]
	2-Handed weapon - Delay >= 45: 4 + [(level - 28) / 3] + [(level - 30) / 5] + [(delay-40)/3]


Now with this patch the formulas are:
	1-Handed weapon - Primary Hand: (damage * delay * level * 80) / 400000

	1-Handed weapon - Secondary Hand: [Primary Hand Formula * Base1 of Sinister Strike SPA]

	2-Handed weapon: (damage * delay * level * 110) / 400000


The new formula is intended to better scale to modern weapons where delays are much lower and base damage values are much higher.
It also allows sinister strikes to scale over time and should show a marked improvement in offhand damage.

If the effect on very low level content ends up being a problem the formula may be reviewed for lower end worst-case situations.

Note that players must be at least level 28 for the damage bonus to apply.
This change also removed the restriction on what classes have weapon damage bonus applied, previously priests and intelligence casters were excluded. 




